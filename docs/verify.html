<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Skapa certifikat</title>
  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- Tag on social media -->
  <meta property="og:title" content="Välj vilket företag du vill arbeta oss">
  <meta property="og:description" content="Stick ut i cv-högen med certifikatet Workplace Of Choice">
  <meta property="og:image" content="https://www.blivald.se/images/stairs.jpg">
  <meta property="og:url" content="https://www.blivald.se/">
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="https://www.blivald.se/images/stairs.jpg">
  <meta property="og:site_name" content="Blivald.se">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

  <link href="css/main.css" rel="stylesheet">

  <style>
  .form-control:focus {
    background: #fff;
    box-shadow: none;
    border-color: #fff;
  }

  .form-control {
    color: #000 !important;
    border-width: 1px;
    background: #fff;
    box-shadow: none;
  }
  </style>

      </head>
      <body class="container-fluid p-0">

  <header>

    <nav class="navbar p-2 border-color"> <!-- style="background-image: linear-gradient(to right,#462523 0,#cb9b51 22%,#f6e27a 45%,#f6f2c0 50%,#f6e27a 55%,#cb9b51 78%,#462523 100%);" -->
      <div class="container-fluid">
        <a class="navbar-brand p-0 mb-0 h2 fs-5" href="/">Blivald.se
          <!--  <img class="icon-glow2" height="25" src="certificate_v10.svg"/> -->
        </a>
  <span>utfärdar <strong>Workplace of Choice</strong></span>

      </div>
    </nav>


  </header>

          <div id="message"></div>


          <div class="row justify-content-md-center mt-5">

            <div class="col-md-6 text-center p-5">

                <h2 class="display-3">Verifiera certifikat</h2>

                <div class="mb-4 lead">
                  Här verifierar du att ett certifikat är aktivt.
                </div>


                <form id="verify" action="https://api.blivald.se/certificates/">
  <!--                <div class="input-group">
                    <input class="form-control form-control-lg rounded-0" type="text" name="certificate" placeholder="Fyll i det ID-nummer som står på certifikatet" id="certificate_id">
                    <span class="input-group-btn">
                      <button href="" type="submit" class="btn btn-lg btn-primary rounded-0">Verifiera</button>
                    </span>
                  </div>-->
                  <div class="row d-flex mt-3 p-0 justify-content-center g-0">
                    <div class="col-sm-12 col-md-8 col-lg-8 mb-3">

                      <input class="form-control form-control-lg rounded-0" type="text" name="certificate" placeholder="Fyll i det ID-nummer som står på certifikatet" id="certificate_id">


                    <p class="text-small mt-2">Skanna qr-koden på certifikatet. Eller mata in koden från certifikat-filen.</p>
                    </div>


                    <div class="col-auto">
                      <button href="" type="submit" class="btn btn-lg btn-primary rounded-0">Verifiera ></button>
                    </div>



                  </div>
                </form>




            </div>
          </div>



          <footer style="background:#fff">
            <div class="container-fluid mt-5 mb-5">

              <div class="row mx-auto p-5">
                <div class="col-xs-6 col-md-3">
                  <h6>Kort om blivald.se</h6>
                  <p>Vill hjälpa individer att <strong>intyga sin vilja</strong>. Många arbetsgivare vill träffa den individ som valt de bland över en miljon företag i Sverige.</p>
                </div>

                <div class="col-xs-6 col-md-3">
                  <h6>Arbetsgivare</h6>
                  <ul class="list-unstyled">
                    <li><a href="verify.html">Har du fått ett certifikat?</a></li>
                  </ul>
                </div>

                <div class="col-xs-6 col-md-3">
                  <h6>Kontakt</h6>
                  <ul class="list-unstyled">
                    <li><a href="mailto:info@blivald.se" class="text-decoration-none">Email</a></li>
                  </ul>
                </div>

                <div class="col-xs-6 col-md-3">
                  <h6>Villkor sajten</h6>
                  <ul class="list-unstyled">
                    <li><a href="privacy.html">Privacy policy</a></li>
                    <li>Inga kakor/cookies används</li>
                  </ul>
                </div>
              </div>
            </div>

          </footer>


        <script src="js/jquery-3.3.1.min.js"></script>
        <!--	<script src="js/jquery.steps.js"></script>  -->
        <!--<script src="js/jquery-ui.min.js"></script>-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/bootstrap@5.2.0-beta1/js/bootstrap.min.js"></script>
        <script src="js/verify.js"></script>
        <script>
        // Attach a submit handler to the form
        $( "#verify" ).submit(function( event ) {

          // Stop form from submitting normally
          event.preventDefault();

          // Get some values from elements on the page:
          var $form = $( this ),
          id = $form.find( "input[name='certificate']" ).val(),
          url = $form.attr( "action" ) + id;

          var patch = {"action":"verify"};

    //      $.ajaxSetup({
    //        converters: {
    //          "text json" : function(response) {
    //            return (response == "[]") ? null : JSON.parse(response);
    //          },
    //        },
    //      });

          // Send the data using post
          var posting = $.ajax( {
            type: 'PATCH',
            url: url,
            data: JSON.stringify(patch),
            processData: false,
            contentType: 'application/json',
            success: function(data){
              // alert("test");
              console.log(data);
               $('#message').html('<div id="alert" class="alert alert-warning alert-dismissible fade show" role="alert"><span aria-hidden="true">&times;</span></button><strong>Grattis!</strong> Certifikatet är giltigt. Vi från blivald.se hoppas att certifikatet har möjliggjort för en anställning.</div>');
            }
          })
          .done(function() {
            //alert("done");
          })
          .fail(function() {
            $('#message').html('<div id="alert" class="alert alert-warning fade show" role="alert"><strong>Tyvärr!</strong> Hittar inget certifikat med det angivna numret. Dubbelkolla att du angivet rätt nummer. Får du det inte att fungera så kan du maila certifikatet till <a href=\"mailto:info@blivald.se\">verify@blivald.se</a> så kontrollerar vi och återkommer snart med ett svar.</div>');
            //  alert( "error" );
          })
          .always(function() {
          //  alert( "finished" );
          });

        });
        </script>
      </body>
      </html>
